<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">   
 <meta>
  <!-- Stylesheets -->
  <link href="../web.css" type="text/css" rel="stylesheet"></link>
  <title>VLFeat - Documentation - C API</title>
   
  
  <!-- Scripts-->
  
 </meta>
 
 <!-- Body Start -->
 <body>
  <div id="header">
   <!-- Google CSE Search Box Begins -->
   <form action="http://www.vlfeat.org/search.html" method="get" id="cse-search-box" enctype="application/x-www-form-urlencoded">
    <div>
     <input type="hidden" name="cx" value="003215582122030917471:oq23albfeam"></input>
     <input type="hidden" name="cof" value="FORID:11"></input>
     <input type="hidden" name="ie" value="UTF-8"></input>
     <input type="text" name="q" size="31"></input>
     <input type="submit" name="sa" value="Search"></input>
    </div>
   </form>
   <script src="http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en" xml:space="preserve" type="text/javascript"></script>
   <!-- Google CSE Search Box Ends -->
   <h1>VLFeat.org</h1>
  </div>
  <div id="headbanner">
   Documentation - C API
  </div>
  <div id="pagebody">
   <div id="sidebar"> <!-- Navigation Start -->
    <ul>
<li><a href="../index.html">Home</a>
</li>
<li><a href="../download.html">Download</a>
</li>
<li><a href="../doc.html">Documentation</a>
<ul>
<li><a href="../mdoc/mdoc.html">Matlab API</a>
</li>
<li><a href="index.html" class='active' >C API</a>
</li>
<li><a href="../man/man.html">Man pages</a>
</li>
</ul></li>
<li><a href="../overview/tut.html">Tutorials</a>
</li>
</ul>

   </div> <!-- sidebar -->
   <div id="content">
    
    <div class="doxygen">
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>sift.c File Reference</h1>Scale Invariant Feature Transform (SIFT) - Definition.  
<a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="sift_8h-source.html">sift.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="imop_8h-source.html">imop.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="mathop_8h-source.html">mathop.h</a>&quot;</code><br>

<p>
<a href="sift_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_INLINE double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sift_8c.html#54a28f7f095a58401a7917073f43866f">fast_expn</a> (double x)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fast <img class="formulaInl" alt="$exp(-x)$" src="form_199.png"> approximation.  <a href="#54a28f7f095a58401a7917073f43866f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sift_8c.html#c0f5ab6b07f3edd4728f6c7439f886f4">fast_expn_init</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize tables for <a class="el" href="sift_8c.html#54a28f7f095a58401a7917073f43866f" title="Fast  approximation.">fast_expn</a>.  <a href="#c0f5ab6b07f3edd4728f6c7439f886f4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sift_8c.html#eb42c89bf4510234d60ba3eef7010c29">copy_and_upsample_rows</a> (<a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a> *dst, <a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a> const *src, int width, int height)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy image, upsample rows and take transpose.  <a href="#eb42c89bf4510234d60ba3eef7010c29"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sift_8c.html#457daa5f995f4b946c1a44a45e7702bb">copy_and_downsample</a> (<a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a> *dst, <a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a> const *src, int width, int height, int d)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy and downsample an image.  <a href="#457daa5f995f4b946c1a44a45e7702bb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_EXPORT <a class="el" href="struct__VlSiftFilt.html">VlSiftFilt</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sift_8c.html#7430415e1978727a55a29f203eb38d3e">vl_sift_new</a> (int width, int height, int noctaves, int nlevels, int o_min)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new SIFT filter.  <a href="#7430415e1978727a55a29f203eb38d3e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_EXPORT void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sift_8c.html#bcf6b47f064329813fa54d80310728cd">vl_sift_delete</a> (<a class="el" href="struct__VlSiftFilt.html">VlSiftFilt</a> *f)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete SIFT filter.  <a href="#bcf6b47f064329813fa54d80310728cd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_EXPORT int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sift_8c.html#774f028cadf0fc556bfd6170eb0033b9">vl_sift_process_first_octave</a> (<a class="el" href="struct__VlSiftFilt.html">VlSiftFilt</a> *f, <a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a> const *im)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start processing a new image.  <a href="#774f028cadf0fc556bfd6170eb0033b9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_EXPORT int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sift_8c.html#a46dad3788e44ffb6aed2ccb8c445c2d">vl_sift_process_next_octave</a> (<a class="el" href="struct__VlSiftFilt.html">VlSiftFilt</a> *f)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Process next octave.  <a href="#a46dad3788e44ffb6aed2ccb8c445c2d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_EXPORT void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sift_8c.html#248f0925ed45fa4632ea30fa9b2229af">vl_sift_detect</a> (<a class="el" href="struct__VlSiftFilt.html">VlSiftFilt</a> *f)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Detect keypoints.  <a href="#248f0925ed45fa4632ea30fa9b2229af"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sift_8c.html#ce1fba61b0cc6ad7b1b0f9a07eabdf87">update_gradient</a> (<a class="el" href="struct__VlSiftFilt.html">VlSiftFilt</a> *f)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update gradients to current GSS octave.  <a href="#ce1fba61b0cc6ad7b1b0f9a07eabdf87"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_EXPORT int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sift_8c.html#b38b0a5d98e491762041e7378355b7b6">vl_sift_calc_keypoint_orientations</a> (<a class="el" href="struct__VlSiftFilt.html">VlSiftFilt</a> *f, double angles[4], <a class="el" href="struct__VlSiftKeypoint.html">VlSiftKeypoint</a> const *k)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculate the keypoint orientation(s).  <a href="#b38b0a5d98e491762041e7378355b7b6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_INLINE <a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sift_8c.html#b7319c742b088d2629f388b714baa996">normalize_histogram</a> (<a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a> *begin, <a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a> *end)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Normalizes in norm L_2 a descriptor.  <a href="#b7319c742b088d2629f388b714baa996"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_EXPORT void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sift_8c.html#3d537eb2a200c3c19e9a751178d1b9b5">vl_sift_calc_raw_descriptor</a> (<a class="el" href="struct__VlSiftFilt.html">VlSiftFilt</a> const *f, <a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a> const *grad, <a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a> *descr, int width, int height, double x, double y, double sigma, double angle0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Run the SIFT descriptor on raw data.  <a href="#3d537eb2a200c3c19e9a751178d1b9b5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_EXPORT void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sift_8c.html#d5021ed313da8e8c2d0174f711df6b0e">vl_sift_calc_keypoint_descriptor</a> (<a class="el" href="struct__VlSiftFilt.html">VlSiftFilt</a> *f, <a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a> *descr, <a class="el" href="struct__VlSiftKeypoint.html">VlSiftKeypoint</a> const *k, double angle0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compute the descriptor of a keypoint.  <a href="#d5021ed313da8e8c2d0174f711df6b0e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_EXPORT void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sift_8c.html#445bbb5bcedabfa3c16df83d1817cd8d">vl_sift_keypoint_init</a> (<a class="el" href="struct__VlSiftFilt.html">VlSiftFilt</a> const *f, <a class="el" href="struct__VlSiftKeypoint.html">VlSiftKeypoint</a> *k, double x, double y, double sigma)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize a keypoint from its position and scale.  <a href="#445bbb5bcedabfa3c16df83d1817cd8d"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sift_8c.html#6bfe7ecf9f4b9125e9613e90e4dc8971">expn_tab</a> [EXPN_SZ+1]</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<p><b>For internal use only.</b></p>
<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Andrea Vedaldi </dd></dl>
</p>

<p>Definition in file <a class="el" href="sift_8c-source.html">sift.c</a>.</p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="457daa5f995f4b946c1a44a45e7702bb"></a><!-- doxytag: member="sift.c::copy_and_downsample" ref="457daa5f995f4b946c1a44a45e7702bb" args="(vl_sift_pix *dst, vl_sift_pix const *src, int width, int height, int d)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void copy_and_downsample           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a> *&nbsp;</td>
          <td class="paramname"> <em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a> const *&nbsp;</td>
          <td class="paramname"> <em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>d</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<p><b>For internal use only.</b></p>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dst</em>&nbsp;</td><td>output imgae buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>src</em>&nbsp;</td><td>input image buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>width</em>&nbsp;</td><td>input image width. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>height</em>&nbsp;</td><td>input image height. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>d</em>&nbsp;</td><td>octaves (non negative).</td></tr>
  </table>
</dl>
The function downsamples the image <em>d</em> times, reducing it to <code>1/2^d</code> of its original size. The parameters <em>width</em> and <em>height</em> are the size of the input image. The destination image <em>dst</em> is assumed to be <code>floor(width/2^d)</code> pixels wide and <code>floor(height/2^d)</code> pixels high. </p>

<p>Definition at line <a class="el" href="sift_8c-source.html#l00797">797</a> of file <a class="el" href="sift_8c-source.html">sift.c</a>.</p>

<p>Referenced by <a class="el" href="sift_8c-source.html#l00937">vl_sift_process_first_octave()</a>, and <a class="el" href="sift_8c-source.html#l01043">vl_sift_process_next_octave()</a>.</p>

</div>
</div><p>
<a class="anchor" name="eb42c89bf4510234d60ba3eef7010c29"></a><!-- doxytag: member="sift.c::copy_and_upsample_rows" ref="eb42c89bf4510234d60ba3eef7010c29" args="(vl_sift_pix *dst, vl_sift_pix const *src, int width, int height)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void copy_and_upsample_rows           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a> *&nbsp;</td>
          <td class="paramname"> <em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a> const *&nbsp;</td>
          <td class="paramname"> <em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>height</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<p><b>For internal use only.</b></p>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dst</em>&nbsp;</td><td>output image buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>src</em>&nbsp;</td><td>input image buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>width</em>&nbsp;</td><td>input image width. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>height</em>&nbsp;</td><td>input image height.</td></tr>
  </table>
</dl>
The output image has dimensions <em>height</em> by 2 <em>width</em> (so the destination buffer must be at least as big as two times the input buffer).<p>
Upsampling is performed by linear interpolation. </p>

<p>Definition at line <a class="el" href="sift_8c-source.html#l00758">758</a> of file <a class="el" href="sift_8c-source.html">sift.c</a>.</p>

<p>Referenced by <a class="el" href="sift_8c-source.html#l00937">vl_sift_process_first_octave()</a>.</p>

</div>
</div><p>
<a class="anchor" name="54a28f7f095a58401a7917073f43866f"></a><!-- doxytag: member="sift.c::fast_expn" ref="54a28f7f095a58401a7917073f43866f" args="(double x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VL_INLINE double fast_expn           </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>x</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<p><b>For internal use only.</b></p>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>argument.</td></tr>
  </table>
</dl>
The argument must be in the range [0, EXPN_MAX] .<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>approximation of <img class="formulaInl" alt="$exp(-x)$" src="form_199.png">. </dd></dl>
</p>

<p>Definition at line <a class="el" href="sift_8c-source.html#l00710">710</a> of file <a class="el" href="sift_8c-source.html">sift.c</a>.</p>

<p>References <a class="el" href="sift_8c-source.html#l00691">expn_tab</a>, and <a class="el" href="mathop_8h-source.html#l00139">vl_floor_d()</a>.</p>

<p>Referenced by <a class="el" href="sift_8c-source.html#l01883">vl_sift_calc_keypoint_descriptor()</a>, <a class="el" href="sift_8c-source.html#l01519">vl_sift_calc_keypoint_orientations()</a>, and <a class="el" href="sift_8c-source.html#l01714">vl_sift_calc_raw_descriptor()</a>.</p>

</div>
</div><p>
<a class="anchor" name="c0f5ab6b07f3edd4728f6c7439f886f4"></a><!-- doxytag: member="sift.c::fast_expn_init" ref="c0f5ab6b07f3edd4728f6c7439f886f4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VL_INLINE void fast_expn_init           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<p><b>For internal use only.</b></p>
<p>
</p>

<p>Definition at line <a class="el" href="sift_8c-source.html#l00732">732</a> of file <a class="el" href="sift_8c-source.html">sift.c</a>.</p>

<p>References <a class="el" href="sift_8c-source.html#l00691">expn_tab</a>.</p>

<p>Referenced by <a class="el" href="sift_8c-source.html#l00834">vl_sift_new()</a>.</p>

</div>
</div><p>
<a class="anchor" name="b7319c742b088d2629f388b714baa996"></a><!-- doxytag: member="sift.c::normalize_histogram" ref="b7319c742b088d2629f388b714baa996" args="(vl_sift_pix *begin, vl_sift_pix *end)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VL_INLINE <a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a> normalize_histogram           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a> *&nbsp;</td>
          <td class="paramname"> <em>begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a> *&nbsp;</td>
          <td class="paramname"> <em>end</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<p><b>For internal use only.</b></p>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>begin</em>&nbsp;</td><td>begin of histogram. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>end</em>&nbsp;</td><td>end of histogram. </td></tr>
  </table>
</dl>
</p>

<p>Definition at line <a class="el" href="sift_8c-source.html#l01664">1664</a> of file <a class="el" href="sift_8c-source.html">sift.c</a>.</p>

<p>References <a class="el" href="mathop_8h-source.html#l00032">VL_EPSILON_F</a>, and <a class="el" href="mathop_8h-source.html#l00387">vl_fast_sqrt_f()</a>.</p>

<p>Referenced by <a class="el" href="sift_8c-source.html#l01883">vl_sift_calc_keypoint_descriptor()</a>, and <a class="el" href="sift_8c-source.html#l01714">vl_sift_calc_raw_descriptor()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ce1fba61b0cc6ad7b1b0f9a07eabdf87"></a><!-- doxytag: member="sift.c::update_gradient" ref="ce1fba61b0cc6ad7b1b0f9a07eabdf87" args="(VlSiftFilt *f)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void update_gradient           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__VlSiftFilt.html">VlSiftFilt</a> *&nbsp;</td>
          <td class="paramname"> <em>f</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<p><b>For internal use only.</b></p>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>f</em>&nbsp;</td><td>SIFT filter.</td></tr>
  </table>
</dl>
The function makes sure that the gradient buffer is up-to-date with the current GSS data.<p>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd>The minimum octave size is 2x2xS. </dd></dl>
</p>

<p>Definition at line <a class="el" href="sift_8c-source.html#l01407">1407</a> of file <a class="el" href="sift_8c-source.html">sift.c</a>.</p>

<p>References <a class="el" href="sift_8h-source.html#l00081">_VlSiftFilt::grad</a>, <a class="el" href="sift_8h-source.html#l00082">_VlSiftFilt::grad_o</a>, <a class="el" href="sift_8h-source.html#l00063">_VlSiftFilt::o_cur</a>, <a class="el" href="sift_8h-source.html#l00062">_VlSiftFilt::s_max</a>, <a class="el" href="sift_8h-source.html#l00061">_VlSiftFilt::s_min</a>, <a class="el" href="sift_8h-source.html#l00244">vl_sift_get_octave()</a>, <a class="el" href="sift_8h-source.html#l00226">vl_sift_get_octave_height()</a>, and <a class="el" href="sift_8h-source.html#l00214">vl_sift_get_octave_width()</a>.</p>

<p>Referenced by <a class="el" href="sift_8c-source.html#l01883">vl_sift_calc_keypoint_descriptor()</a>, and <a class="el" href="sift_8c-source.html#l01519">vl_sift_calc_keypoint_orientations()</a>.</p>

</div>
</div><p>
<a class="anchor" name="d5021ed313da8e8c2d0174f711df6b0e"></a><!-- doxytag: member="sift.c::vl_sift_calc_keypoint_descriptor" ref="d5021ed313da8e8c2d0174f711df6b0e" args="(VlSiftFilt *f, vl_sift_pix *descr, VlSiftKeypoint const *k, double angle0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VL_EXPORT void vl_sift_calc_keypoint_descriptor           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__VlSiftFilt.html">VlSiftFilt</a> *&nbsp;</td>
          <td class="paramname"> <em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a> *&nbsp;</td>
          <td class="paramname"> <em>descr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__VlSiftKeypoint.html">VlSiftKeypoint</a> const *&nbsp;</td>
          <td class="paramname"> <em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>angle0</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>f</em>&nbsp;</td><td>SIFT filter. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>descr</em>&nbsp;</td><td>SIFT descriptor (output) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>k</em>&nbsp;</td><td>keypoint. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>angle0</em>&nbsp;</td><td>keypoint direction.</td></tr>
  </table>
</dl>
The function computes the SIFT descriptor of the keypoint <em>k</em> of orientation <em>angle0</em>. The function fills the buffer <em>descr</em> which must be large enough to hold the descriptor.<p>
The function assumes that the keypoint is on the current octave. If not, it does not do anything. 
<p>Definition at line <a class="el" href="sift_8c-source.html#l01883">1883</a> of file <a class="el" href="sift_8c-source.html">sift.c</a>.</p>

<p>References <a class="el" href="sift_8c-source.html#l00710">fast_expn()</a>, <a class="el" href="sift_8h-source.html#l00081">_VlSiftFilt::grad</a>, <a class="el" href="sift_8c-source.html#l01664">normalize_histogram()</a>, <a class="el" href="sift_8h-source.html#l00031">_VlSiftKeypoint::o</a>, <a class="el" href="sift_8h-source.html#l00063">_VlSiftFilt::o_cur</a>, <a class="el" href="sift_8h-source.html#l00062">_VlSiftFilt::s_max</a>, <a class="el" href="sift_8h-source.html#l00061">_VlSiftFilt::s_min</a>, <a class="el" href="sift_8c-source.html#l01407">update_gradient()</a>, <a class="el" href="mathop_8h-source.html#l00155">vl_abs_f()</a>, <a class="el" href="mathop_8h-source.html#l00130">vl_floor_f()</a>, <a class="el" href="generic_8h-source.html#l00211">VL_MAX</a>, <a class="el" href="generic_8h-source.html#l00204">VL_MIN</a>, <a class="el" href="mathop_8h-source.html#l00105">vl_mod_2pi_f()</a>, <a class="el" href="mathop_8h-source.html#l00023">VL_PI</a>, and <a class="el" href="sift_8h-source.html#l00079">_VlSiftFilt::windowSize</a>.</p>

</div>
</div><p>
<a class="anchor" name="b38b0a5d98e491762041e7378355b7b6"></a><!-- doxytag: member="sift.c::vl_sift_calc_keypoint_orientations" ref="b38b0a5d98e491762041e7378355b7b6" args="(VlSiftFilt *f, double angles[4], VlSiftKeypoint const *k)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VL_EXPORT int vl_sift_calc_keypoint_orientations           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__VlSiftFilt.html">VlSiftFilt</a> *&nbsp;</td>
          <td class="paramname"> <em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>angles</em>[4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__VlSiftKeypoint.html">VlSiftKeypoint</a> const *&nbsp;</td>
          <td class="paramname"> <em>k</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>f</em>&nbsp;</td><td>SIFT filter. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>angles</em>&nbsp;</td><td>orientations (output). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>k</em>&nbsp;</td><td>keypoint.</td></tr>
  </table>
</dl>
The function computes the orientation(s) of the keypoint <em>k</em>. The function returns the number of orientations found (up to four). The orientations themselves are written to the vector <em>angles</em>.<p>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd>The function requires the keypoint octave <em>k-&gt;o</em> to be equal to the filter current octave <a class="el" href="sift_8h.html#9cc1c77b8fc49875017557096539acb6" title="Get current octave data.">vl_sift_get_octave</a>. If this is not the case, the function returns zero orientations.<p>
The function requires the keypoint scale level <code>k-&gt;s</code> to be in the range <code>s_min+1</code> and <code>s_max-2</code> (where usually <code>s_min=0</code> and <code>s_max=S+2</code>). If this is not the case, the function returns zero orientations.</dd></dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>number of orientations found. </dd></dl>

<p>Definition at line <a class="el" href="sift_8c-source.html#l01519">1519</a> of file <a class="el" href="sift_8c-source.html">sift.c</a>.</p>

<p>References <a class="el" href="sift_8c-source.html#l00710">fast_expn()</a>, <a class="el" href="sift_8h-source.html#l00031">_VlSiftKeypoint::o</a>, <a class="el" href="sift_8h-source.html#l00063">_VlSiftFilt::o_cur</a>, <a class="el" href="sift_8h-source.html#l00062">_VlSiftFilt::s_max</a>, <a class="el" href="sift_8h-source.html#l00061">_VlSiftFilt::s_min</a>, <a class="el" href="sift_8c-source.html#l01407">update_gradient()</a>, <a class="el" href="mathop_8h-source.html#l00139">vl_floor_d()</a>, <a class="el" href="generic_8h-source.html#l00211">VL_MAX</a>, <a class="el" href="generic_8h-source.html#l00204">VL_MIN</a>, and <a class="el" href="mathop_8h-source.html#l00023">VL_PI</a>.</p>

</div>
</div><p>
<a class="anchor" name="3d537eb2a200c3c19e9a751178d1b9b5"></a><!-- doxytag: member="sift.c::vl_sift_calc_raw_descriptor" ref="3d537eb2a200c3c19e9a751178d1b9b5" args="(VlSiftFilt const *f, vl_sift_pix const *grad, vl_sift_pix *descr, int width, int height, double x, double y, double sigma, double angle0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VL_EXPORT void vl_sift_calc_raw_descriptor           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__VlSiftFilt.html">VlSiftFilt</a> const *&nbsp;</td>
          <td class="paramname"> <em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a> const *&nbsp;</td>
          <td class="paramname"> <em>grad</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a> *&nbsp;</td>
          <td class="paramname"> <em>descr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>sigma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>angle0</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>f</em>&nbsp;</td><td>SIFT filter. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>grad</em>&nbsp;</td><td>image gradients. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>descr</em>&nbsp;</td><td>SIFT descriptor (output). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>width</em>&nbsp;</td><td>image width. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>height</em>&nbsp;</td><td>image height. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>keypoint x coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>y</em>&nbsp;</td><td>keypoint y coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sigma</em>&nbsp;</td><td>keypoint scale. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>angle0</em>&nbsp;</td><td>keypoint orientation.</td></tr>
  </table>
</dl>
The function runs the SIFT descriptor on raw data. Here <em>image</em> is a 2 x <em>width</em> x <em>height</em> array (by convention, the memory layout is a s such the first index is the fastest varying one). The first <em>width</em> x <em>height</em> layer of the array contains the gradient magnitude and the second the gradient angle (in radians, between 0 and <img class="formulaInl" alt="$ 2\pi $" src="form_200.png">). <em>x</em>, <em>y</em> and <em>sigma</em> give the keypoint center and scale respectively.<p>
In order to be equivalent to a standard SIFT descriptor the image gradient must be computed at a smoothing level equal to the scale of the keypoint. In practice, the actual SIFT algorithm makes the following additional approximation, which influence the result:<p>
<ul>
<li>Scale is discretized in <code>S</code> levels.</li><li>The image is downsampled once for each octave (if you do this, the parameters <em>x</em>, <em>y</em> and <em>sigma</em> must be scaled too). </li></ul>

<p>Definition at line <a class="el" href="sift_8c-source.html#l01714">1714</a> of file <a class="el" href="sift_8c-source.html">sift.c</a>.</p>

<p>References <a class="el" href="sift_8c-source.html#l00710">fast_expn()</a>, <a class="el" href="sift_8c-source.html#l01664">normalize_histogram()</a>, <a class="el" href="mathop_8h-source.html#l00155">vl_abs_f()</a>, <a class="el" href="mathop_8h-source.html#l00040">VL_EPSILON_D</a>, <a class="el" href="mathop_8h-source.html#l00130">vl_floor_f()</a>, <a class="el" href="generic_8h-source.html#l00211">VL_MAX</a>, <a class="el" href="generic_8h-source.html#l00204">VL_MIN</a>, <a class="el" href="mathop_8h-source.html#l00105">vl_mod_2pi_f()</a>, <a class="el" href="mathop_8h-source.html#l00023">VL_PI</a>, and <a class="el" href="sift_8h-source.html#l00079">_VlSiftFilt::windowSize</a>.</p>

</div>
</div><p>
<a class="anchor" name="bcf6b47f064329813fa54d80310728cd"></a><!-- doxytag: member="sift.c::vl_sift_delete" ref="bcf6b47f064329813fa54d80310728cd" args="(VlSiftFilt *f)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VL_EXPORT void vl_sift_delete           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__VlSiftFilt.html">VlSiftFilt</a> *&nbsp;</td>
          <td class="paramname"> <em>f</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>f</em>&nbsp;</td><td>SIFT filter to delete.</td></tr>
  </table>
</dl>
The function frees the resources allocated by <a class="el" href="sift_8c.html#7430415e1978727a55a29f203eb38d3e" title="Create a new SIFT filter.">vl_sift_new()</a>. 
<p>Definition at line <a class="el" href="sift_8c-source.html#l00907">907</a> of file <a class="el" href="sift_8c-source.html">sift.c</a>.</p>

<p>References <a class="el" href="generic_8h-source.html#l00265">vl_free()</a>.</p>

</div>
</div><p>
<a class="anchor" name="248f0925ed45fa4632ea30fa9b2229af"></a><!-- doxytag: member="sift.c::vl_sift_detect" ref="248f0925ed45fa4632ea30fa9b2229af" args="(VlSiftFilt *f)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VL_EXPORT void vl_sift_detect           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__VlSiftFilt.html">VlSiftFilt</a> *&nbsp;</td>
          <td class="paramname"> <em>f</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The function detect keypoints in the current octave filling the internal keypoint buffer. Keypoints can be retrieved by <a class="el" href="sift_8h.html#d00c6f384a9b50f185cf7acc68e68fbd" title="Get keypoints.">vl_sift_get_keypoints()</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>f</em>&nbsp;</td><td>SIFT filter. </td></tr>
  </table>
</dl>

<p>
Index GSS <p><b>For internal use only.</b></p>
<p>
Index matrix A </p>

<p>Definition at line <a class="el" href="sift_8c-source.html#l01113">1113</a> of file <a class="el" href="sift_8c-source.html">sift.c</a>.</p>

<p>References <a class="el" href="sift_8h-source.html#l00071">_VlSiftFilt::keys</a>, <a class="el" href="sift_8h-source.html#l00073">_VlSiftFilt::keys_res</a>, <a class="el" href="sift_8h-source.html#l00072">_VlSiftFilt::nkeys</a>, <a class="el" href="sift_8h-source.html#l00063">_VlSiftFilt::o_cur</a>, <a class="el" href="sift_8h-source.html#l00059">_VlSiftFilt::S</a>, <a class="el" href="sift_8h-source.html#l00052">_VlSiftFilt::sigma0</a>, <a class="el" href="mathop_8h-source.html#l00165">vl_abs_d()</a>, <a class="el" href="generic_8h-source.html#l00247">vl_malloc()</a>, <a class="el" href="generic_8h-source.html#l00253">vl_realloc()</a>, and <a class="el" href="sift_8h-source.html#l00244">vl_sift_get_octave()</a>.</p>

</div>
</div><p>
<a class="anchor" name="445bbb5bcedabfa3c16df83d1817cd8d"></a><!-- doxytag: member="sift.c::vl_sift_keypoint_init" ref="445bbb5bcedabfa3c16df83d1817cd8d" args="(VlSiftFilt const *f, VlSiftKeypoint *k, double x, double y, double sigma)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VL_EXPORT void vl_sift_keypoint_init           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__VlSiftFilt.html">VlSiftFilt</a> const *&nbsp;</td>
          <td class="paramname"> <em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__VlSiftKeypoint.html">VlSiftKeypoint</a> *&nbsp;</td>
          <td class="paramname"> <em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>sigma</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>f</em>&nbsp;</td><td>SIFT filter. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>k</em>&nbsp;</td><td>SIFT keypoint (output). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>x coordinate of the keypoint center. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>y</em>&nbsp;</td><td>y coordinate of the keypoint center. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sigma</em>&nbsp;</td><td>keypoint scale.</td></tr>
  </table>
</dl>
The function initializes a keypoint structure <em>k</em> from the location <em>x</em> and <em>y</em> and the scale <em>sigma</em> of the keypoint. The keypoint structure maps the keypoint to an octave and scale level of the discretized Gaussian scale space, which is required for instance to compute the keypoint SIFT descriptor.<p>
<dl class="user" compact><dt><b>Algorithm</b></dt><dd></dd></dl>
The formula linking the keypoint scale sigma to the octave and scale indexes is<p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ \sigma(o,s) = \sigma_0 2^{o+s/S} \]" src="form_201.png">
<p>
<p>
In addition to the scale index <em>s</em> (which can be fractional due to scale interpolation) a keypoint has an integer scale index <em>is</em> too (which is the index of the scale level where it was detected in the DoG scale space). We have the constraints (<a class="el" href="sift_8h.html#sift-tech-detector">Detector</a> see also the "SIFT detector"):<p>
<ul>
<li><em>o</em> is integer in the range <img class="formulaInl" alt="$ [o_\mathrm{min}, o_{\mathrm{min}}+O-1] $" src="form_202.png">.</li><li><em>is</em> is integer in the range <img class="formulaInl" alt="$ [s_\mathrm{min}+1, s_\mathrm{max}-2] $" src="form_203.png">. This depends on how the scale is determined during detection, and must be so here because gradients are computed only for this range of scale levels and and are required for the calculation of the SIFT descriptor.</li><li><img class="formulaInl" alt="$ |s - is| < 0.5 $" src="form_204.png"> for detected keypoints in most cases due to the interpolation technique used during detection. However this is not neceserray.</li></ul>
<p>
Thus octave o represents scales <img class="formulaInl" alt="$ \{ \sigma(o, s) : s \in [s_\mathrm{min}+1-.5, s_\mathrm{max}-2+.5] \} $" src="form_205.png">. Note that some scales may be represented more than once. For each scale, we select the largest possible octave that contains it, i.e.<p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ o(\sigma) = \max \{ o \in \mathbb{Z} : \sigma_0 2^{\frac{s_\mathrm{min}+1-.5}{S}} \leq \sigma \} = \mathrm{floor}\,\left[ \log_2(\sigma / \sigma_0) - \frac{s_\mathrm{min}+1-.5}{S}\right] \]" src="form_206.png">
<p>
<p>
and then<p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ s(\sigma) = S \left[\log_2(\sigma / \sigma_0) - o(\sigma)\right], \quad is(\sigma) = \mathrm{round}\,(s(\sigma)) \]" src="form_207.png">
<p>
<p>
In practice, both <img class="formulaInl" alt="$ o(\sigma) $" src="form_208.png"> and <img class="formulaInl" alt="$ is(\sigma) $" src="form_209.png"> are clamped to their feasible range as determined by the SIFT filter paramteres. 
<p>Definition at line <a class="el" href="sift_8c-source.html#l02123">2123</a> of file <a class="el" href="sift_8c-source.html">sift.c</a>.</p>

<p>References <a class="el" href="sift_8h-source.html#l00058">_VlSiftFilt::O</a>, <a class="el" href="sift_8h-source.html#l00060">_VlSiftFilt::o_min</a>, <a class="el" href="sift_8h-source.html#l00059">_VlSiftFilt::S</a>, <a class="el" href="sift_8h-source.html#l00062">_VlSiftFilt::s_max</a>, <a class="el" href="sift_8h-source.html#l00061">_VlSiftFilt::s_min</a>, <a class="el" href="sift_8h-source.html#l00040">_VlSiftKeypoint::sigma</a>, <a class="el" href="sift_8h-source.html#l00052">_VlSiftFilt::sigma0</a>, <a class="el" href="mathop_8h-source.html#l00139">vl_floor_d()</a>, <a class="el" href="generic_8h-source.html#l00211">VL_MAX</a>, and <a class="el" href="generic_8h-source.html#l00204">VL_MIN</a>.</p>

</div>
</div><p>
<a class="anchor" name="7430415e1978727a55a29f203eb38d3e"></a><!-- doxytag: member="sift.c::vl_sift_new" ref="7430415e1978727a55a29f203eb38d3e" args="(int width, int height, int noctaves, int nlevels, int o_min)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VL_EXPORT <a class="el" href="struct__VlSiftFilt.html">VlSiftFilt</a>* vl_sift_new           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>noctaves</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nlevels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>o_min</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>width</em>&nbsp;</td><td>image width. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>height</em>&nbsp;</td><td>image height. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>noctaves</em>&nbsp;</td><td>number of octaves. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nlevels</em>&nbsp;</td><td>number of levels per octave. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>o_min</em>&nbsp;</td><td>first octave index.</td></tr>
  </table>
</dl>
The function allocates and returns a new SIFT filter for the specified image and scale space geometry.<p>
Setting <em>O</em> to a negative value sets the number of octaves to the maximum possible value depending on the size of the image.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the new SIFT filter. </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="sift_8c.html#bcf6b47f064329813fa54d80310728cd" title="Delete SIFT filter.">vl_sift_delete()</a>. </dd></dl>

<p>Definition at line <a class="el" href="sift_8c-source.html#l00834">834</a> of file <a class="el" href="sift_8c-source.html">sift.c</a>.</p>

<p>References <a class="el" href="sift_8c-source.html#l00732">fast_expn_init()</a>, <a class="el" href="sift_8h-source.html#l00062">_VlSiftFilt::s_max</a>, <a class="el" href="sift_8h-source.html#l00061">_VlSiftFilt::s_min</a>, <a class="el" href="sift_8h-source.html#l00052">_VlSiftFilt::sigma0</a>, <a class="el" href="sift_8h-source.html#l00053">_VlSiftFilt::sigmak</a>, <a class="el" href="generic_8h-source.html#l00247">vl_malloc()</a>, <a class="el" href="generic_8h-source.html#l00211">VL_MAX</a>, <a class="el" href="generic_8h-source.html#l00204">VL_MIN</a>, and <a class="el" href="generic_8h-source.html#l00222">VL_SHIFT_LEFT</a>.</p>

</div>
</div><p>
<a class="anchor" name="774f028cadf0fc556bfd6170eb0033b9"></a><!-- doxytag: member="sift.c::vl_sift_process_first_octave" ref="774f028cadf0fc556bfd6170eb0033b9" args="(VlSiftFilt *f, vl_sift_pix const *im)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VL_EXPORT int vl_sift_process_first_octave           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__VlSiftFilt.html">VlSiftFilt</a> *&nbsp;</td>
          <td class="paramname"> <em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sift_8h.html#7efac4fb08e4642f12ef439ac376a5cc">vl_sift_pix</a> const *&nbsp;</td>
          <td class="paramname"> <em>im</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>f</em>&nbsp;</td><td>SIFT filter. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>im</em>&nbsp;</td><td>image data.</td></tr>
  </table>
</dl>
The function starts processing a new image by computing its Gaussian scale space at the lower octave. It also empties the internal keypoint buffer.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>error code. The function returns <a class="el" href="generic_8h.html#67cc69e40d7af2aec137b36e53422982">VL_ERR_EOF</a> if there are no more octaves to process.</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="sift_8c.html#a46dad3788e44ffb6aed2ccb8c445c2d" title="Process next octave.">vl_sift_process_next_octave()</a>. </dd></dl>

<p>Definition at line <a class="el" href="sift_8c-source.html#l00937">937</a> of file <a class="el" href="sift_8c-source.html">sift.c</a>.</p>

<p>References <a class="el" href="sift_8c-source.html#l00797">copy_and_downsample()</a>, <a class="el" href="sift_8c-source.html#l00758">copy_and_upsample_rows()</a>, <a class="el" href="sift_8h-source.html#l00057">_VlSiftFilt::height</a>, <a class="el" href="sift_8h-source.html#l00072">_VlSiftFilt::nkeys</a>, <a class="el" href="sift_8h-source.html#l00058">_VlSiftFilt::O</a>, <a class="el" href="sift_8h-source.html#l00063">_VlSiftFilt::o_cur</a>, <a class="el" href="generic_8h-source.html#l00190">VL_ERR_EOF</a>, <a class="el" href="generic_8h-source.html#l00185">VL_ERR_OK</a>, <a class="el" href="imop_8h.html#1a4f88af24e32dea5e6a84cf3c7590d8">vl_imsmooth_f()</a>, <a class="el" href="generic_8h-source.html#l00222">VL_SHIFT_LEFT</a>, <a class="el" href="sift_8h-source.html#l00244">vl_sift_get_octave()</a>, and <a class="el" href="sift_8h-source.html#l00056">_VlSiftFilt::width</a>.</p>

</div>
</div><p>
<a class="anchor" name="a46dad3788e44ffb6aed2ccb8c445c2d"></a><!-- doxytag: member="sift.c::vl_sift_process_next_octave" ref="a46dad3788e44ffb6aed2ccb8c445c2d" args="(VlSiftFilt *f)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VL_EXPORT int vl_sift_process_next_octave           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__VlSiftFilt.html">VlSiftFilt</a> *&nbsp;</td>
          <td class="paramname"> <em>f</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>f</em>&nbsp;</td><td>SIFT filter.</td></tr>
  </table>
</dl>
The function computes the next octave of the Gaussian scale space. Notice that this clears the record of any feature detected in the previous octave.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>error code. The function returns the error <a class="el" href="generic_8h.html#67cc69e40d7af2aec137b36e53422982">VL_ERR_EOF</a> when there are no more octaves to process.</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="sift_8c.html#774f028cadf0fc556bfd6170eb0033b9" title="Start processing a new image.">vl_sift_process_first_octave()</a>. </dd></dl>

<p>Definition at line <a class="el" href="sift_8c-source.html#l01043">1043</a> of file <a class="el" href="sift_8c-source.html">sift.c</a>.</p>

<p>References <a class="el" href="sift_8c-source.html#l00797">copy_and_downsample()</a>, <a class="el" href="sift_8h-source.html#l00057">_VlSiftFilt::height</a>, <a class="el" href="sift_8h-source.html#l00063">_VlSiftFilt::o_cur</a>, <a class="el" href="generic_8h-source.html#l00190">VL_ERR_EOF</a>, <a class="el" href="generic_8h-source.html#l00185">VL_ERR_OK</a>, <a class="el" href="imop_8h.html#1a4f88af24e32dea5e6a84cf3c7590d8">vl_imsmooth_f()</a>, <a class="el" href="generic_8h-source.html#l00204">VL_MIN</a>, <a class="el" href="generic_8h-source.html#l00222">VL_SHIFT_LEFT</a>, <a class="el" href="sift_8h-source.html#l00244">vl_sift_get_octave()</a>, <a class="el" href="sift_8h-source.html#l00226">vl_sift_get_octave_height()</a>, <a class="el" href="sift_8h-source.html#l00214">vl_sift_get_octave_width()</a>, and <a class="el" href="sift_8h-source.html#l00056">_VlSiftFilt::width</a>.</p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="6bfe7ecf9f4b9125e9613e90e4dc8971"></a><!-- doxytag: member="sift.c::expn_tab" ref="6bfe7ecf9f4b9125e9613e90e4dc8971" args="[EXPN_SZ+1]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="sift_8c.html#6bfe7ecf9f4b9125e9613e90e4dc8971">expn_tab</a>[EXPN_SZ+1]          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<a class="el" href="sift_8c.html#54a28f7f095a58401a7917073f43866f" title="Fast  approximation.">fast_expn</a> table <p><b>For internal use only.</b></p>
<p>
</p>

<p>Definition at line <a class="el" href="sift_8c-source.html#l00691">691</a> of file <a class="el" href="sift_8c-source.html">sift.c</a>.</p>

<p>Referenced by <a class="el" href="sift_8c-source.html#l00710">fast_expn()</a>, and <a class="el" href="sift_8c-source.html#l00732">fast_expn_init()</a>.</p>

</div>
</div><p>
</div>
     <!-- Doc Here -->
    </div>
   
   </div>
   <div class="clear">&nbsp;</div>
  </div> <!-- pagebody -->
  <div id="footer">
   &copy; 2005-09 Andrea Vedaldi and Brian Fulkerson
  </div> <!-- footer -->
  
  <!-- Google Analytics Begins -->
  <script xml:space="preserve" type="text/javascript">
   //<![CDATA[
    var localre = /vlfeat.org/;
    if(document.location.host.search(localre) != -1)
    {
   var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
   document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
   }
   //]]>
  </script>
  <script xml:space="preserve" type="text/javascript">
    //<![CDATA[
    var localre = /vlfeat.org/;
    if(document.location.host.search(localre) != -1)
    {

   try {
   var pageTracker = _gat._getTracker("UA-4936091-2");
   pageTracker._trackPageview();
   } catch(err) {}

   }
   //]]>
  </script>
  <!-- Google Analytics Ends -->
 </body>
</html>

 
